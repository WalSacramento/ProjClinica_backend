// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Clinica {
  id   Int    @id @default(autoincrement())
  nome String @unique

  Usuario              Usuario[]
  Profissional         Profissional[]
  Paciente             Paciente[]
  Consulta             Consulta[]
  Tipo_de_procedimento Tipo_de_procedimento[]
}

model Usuario {
  id              Int      @id @default(autoincrement())
  nome            String
  email           String   @unique
  data_de_criacao DateTime @default(now())
  senha           String
  admin           Role
  clinica         Clinica  @relation(fields: [clinicaId], references: [id])
  clinicaId       Int
}

model Profissional {
  id              Int            @id @default(autoincrement())
  nome            String
  data_de_criacao DateTime       @default(now())
  cargo           String
  clinica         Clinica        @relation(fields: [clinicaId], references: [id])
  clinicaId       Int
  Consulta        Consulta[]
  Procedimento    Procedimento[]
}

model Paciente {
  id                 Int        @id @default(autoincrement())
  nome               String
  cpf                Int
  data_de_criacao    DateTime   @default(now())
  data_de_nascimento Int
  telefone           Int
  sexo               String
  clinica            Clinica    @relation(fields: [clinicaId], references: [id])
  clinicaId          Int
  Consulta           Consulta[]
}

model Consulta {
  id                Int          @id @default(autoincrement())
  data_de_criacao   DateTime     @default(now())
  valor_da_consulta Int
  paciente          Paciente     @relation(fields: [pacienteId], references: [id])
  pacienteId        Int
  profissional      Profissional @relation(fields: [profissionalId], references: [id])
  profissionalId    Int
  procedimento      Procedimento @relation(fields: [procedimentoId], references: [id])
  procedimentoId    Int
  clinica           Clinica      @relation(fields: [clinicaId], references: [id])
  clinicaId         Int
}

model Tipo_de_procedimento {
  id           Int            @id @default(autoincrement())
  nome         String
  clinica      Clinica        @relation(fields: [clinicaId], references: [id])
  clinicaId    Int
  Procedimento Procedimento[]
}

model Procedimento {
  id                   Int                  @id @default(autoincrement())
  nome                 String
  tipo_de_procedimento Tipo_de_procedimento @relation(fields: [tipoId], references: [id])
  tipoId               Int
  profissional         Profissional         @relation(fields: [profissionalId], references: [id])
  profissionalId       Int
  Consulta             Consulta[]
}

enum Role {
  USER
  ADMIN
}
